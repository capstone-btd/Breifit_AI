# Git / version control
.git
.gitignore

# Docker
.dockerignore
Dockerfile

# IDE / Editor specific
.idea
.vscode
*.swp

# Python cache
__pycache__/
*.pyc
*.pyo
*.pyd

# Python virtual environment
.env
.venv
env/
venv/
ENV/

# Test / Coverage artifacts
.pytest_cache/
.coverage
htmlcov/

# README
README.md

# ê¸°íƒ€
notebooks(í…ŒìŠ¤íŠ¸ìš©)/
data/raw/ # Byte-compiled / optimized / DLL files
__pycache__/
*.py[cod]
*$py.class
DB/

# C extensions
*.so

# Distribution / packaging
.Python
build/
develop-eggs/
dist/
downloads/
eggs/
.eggs/
lib/
lib64/
parts/
sdist/
var/
wheels/
share/python-wheels/
*.egg-info/
.installed.cfg
*.egg
MANIFEST

# PyInstaller
#  Usually these files are written by a python script from a template
#  before PyInstaller builds the exe, so as to inject date/other information into it.
*.manifest
*.spec

# Installer logs
pip-log.txt
pip-delete-this-directory.txt

# Unit test / coverage reports
htmlcov/
.tox/
.nox/
.coverage
.coverage.*
.cache
nosetests.xml
coverage.xml
*.cover
*.py,cover
.hypothesis/
.pytest_cache/

# Environments
.env
.venv
env/
venv/
ENV/
env.bak/
venv.bak/

# IDE directories
.idea/
.vscode/

# Downloaded Models
models/

# Data files
data/
*.json
*.csv

# OS specific
.DS_Store

*.env
*.env.local
*.env.development
*.env.production
*.env.test
*.env.test.local

*.log
*.log.*
*.log.*.*
*.log.*.*.*
*.log.*.*.*.*
*.log.*.*.*.*.*
*.log.*.*.*.*.*.*

-----BEGIN RSA PRIVATE KEY-----
MIIEpAIBAAKCAQEA2yoq1pmDBngFHje1wrx8TzNw8n0A3ooIzCnTf5f4SLq0gBeR
liojpBC/qdOLt0bMnh8PsLf4xw3MFh5TFKh+Fcto0f7Q59ypPJQ+NiZTTTejOsT1
X7FZtppGGIbfUTJRW40pPCsLEFcOGzFlDLwroCAGPS8WtPIvOiLA//uzoXppJiYY
87wLXNSquH5H5e5ynJMy56coV0UYGUexD++xdJONsWKwsLVKOgpTufpkZTfI8n6Z
Ep68rU3iWU5ru46GmUoTDwifX8mWbVzrPPVmytudszt3quzxrxBaxdurvUnyFkv2
hy8Q9JEpfnDAXWnMVjv7IuUkO3e+kUMEHkovzwIDAQABAoIBAQCN2gMUFxQZMcGO
R1ybiEelM5RdPs87OnhrPH8pzIDlAgMmDRsr6GZdIIINN2Ds5SQ3C7+qD8kzfRil
EEeRzWSeUqOrl5Q7HjVjgkep4LB2ABbkSOrQXwfECqJn6ZPNCBZkfT89NFba4p28
uAHBdmF+KHwhScMWptIufKQSiyU+07rQ0qh88I/VHLL8z7h+loxG5LSen9adqB/h
Ay++ydz/ZQF1Bk2BR+gqm8iODD6Ii7Or20Kkq76A/1+wfdd/Xa6ZQlbpG9qhptYG
jYUfnSw+jifuoeOviRHx53RanGP36L3Eym11o/Vn549dkbll27GybDgEOc++lJB1
1NzHE4pBAoGBAPxoCdefKSLm8JL5fEqyiaHMHePv2DMd6sFiNJL+LNVbxCeat6io
qSLgppAatEqXCMb3o7eljEnm9wrJOS1hraVw5h3jFCcLoOnfvpbiKDFULa6xuKA9
qNhKMDkxwFdM8uG6/ongEWQIUYS4JIyIKlHGg0K5T54/06ekwBV/c5i/AoGBAN5I
+If37Xeaz5vY0myMP9ne0/3ALGYoQb3+hlMIwlFge93pI+N5Dbnne21VD320952X
7tFZSVM6//e0/CAPLhTo5Q+lMm2+/BN3+qU+SiZdf45wOK3rnSUxZiu6tAc/RRS9
st/KmzNmP/Y+HQmsfevddIIX21akBTzMWRrMXZzxAoGBAKiwf6Nz4/JHlhEkXEUv
/Xv9Bx0Hdt7y56pHEAwNg7k0k2xEouo9joyYx7kXn9caCeuwJeLe6Vua2RCEW4pQ
9dTUF3dyBE30H58uwhnlHCebssxGSrYNf4LOUlxnO70c2Fa0utk6v2SziofA6exi
NKZinedCIkwJLFOmcBnuDDvRAoGAGfNE6IK+O19ca2JVtoxtC99iulYMGOUMP8UO
I3V7UgrEizSjlvPT8Wcf1rS+eTt+SOyq2c/lqozRwzZi1M9Q3uoNi9UKXRuVzCQO
o+nwuCfkM1nQlCVUlDn/Jo3GZK4zP2eiEVRS6B5Ay1uXAkEb9kRFTMbCOYwufFmS
8Xj4WNECgYAVOnu3CJLEc6tpUqNb7xpK/UM/oedFeWUPq4zP/yr5mnqtf7O+14GK
8+5rJNFL/szIDYSeZcqvLAg67RAGRTpKoTFjeRhim70qDDRonGCg6Tm5Js3obRHz
MXn7yoKpAAO12SW6M+sbJt9ZMjaZo9tzArjt/lRIt/BPsNbGrh/msg==
-----END RSA PRIVATE KEY-----FROM pytorch/pytorch:2.1.0-cuda11.8-cudnn8-runtime

# ì§ˆë¬¸ ì—†ì´ ì„¤ì¹˜ë¥¼ ì§„í–‰í•˜ê¸° ìœ„í•œ í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
ENV DEBIAN_FRONTEND=noninteractive

# ìž‘ì—… ë””ë ‰í† ë¦¬ ì„¤ì •
WORKDIR /app

RUN apt-get update && \
    apt-get install -y --no-install-recommends git build-essential && \
    rm -rf /var/lib/apt/lists/*
COPY ./scripts/download_model.py ./scripts/download_model.py
COPY ./requirements.txt .
RUN pip install --no-cache-dir --upgrade pip && \
    pip install --no-cache-dir -r requirements.txt


RUN python scripts/download_model.py


RUN playwright install --with-deps

COPY . .

EXPOSE 8080

CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "8080"] ‰PNG
import asyncio
import sys

# Windowsì—ì„œ Playwright ë¹„ë™ê¸° ì‹¤í–‰ ì‹œ ë°œìƒí•˜ëŠ” NotImplementedError í•´ê²°
# ë‹¤ë¥¸ ì–´ë–¤ importë³´ë‹¤ë„ ë¨¼ì € ì‹¤í–‰ë˜ì–´ì•¼ í•¨.
if sys.platform == "win32":
    asyncio.set_event_loop_policy(asyncio.WindowsProactorEventLoopPolicy())

import json
import os
from fastapi import FastAPI, HTTPException, Request
from fastapi.responses import JSONResponse
from typing import List, Dict, Any
from contextlib import asynccontextmanager
import logging

# Add the parent directory to the path to allow relative imports
# í”„ë¡œì íŠ¸ ë£¨íŠ¸ ê²½ë¡œë¥¼ sys.pathì— ì¶”ê°€
PROJECT_ROOT = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))
if PROJECT_ROOT not in sys.path:
    sys.path.append(PROJECT_ROOT)

# Google Trends ìŠ¤í¬ë¦½íŠ¸ import
from scripts.google_trends import get_trending_keywords
# ë°ì´í„° ìˆ˜ì§‘ íŒŒì´í”„ë¼ì¸ import
from scripts.run_collection import run_collection_pipeline
from src.utils.browser_manager import start_browser, stop_browser, get_browser
from src.utils.logger import setup_logger
from DB.database import engine, Base
from DB import models

# ê¸°ë³¸ ë¡œê±° ì„¤ì •
setup_logger()

# ì„œë²„ ì‹œìž‘ ì‹œ ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸” ìƒì„±
models.Base.metadata.create_all(bind=engine)

@asynccontextmanager
async def lifespan(app: FastAPI):
    # ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œìž‘ ì‹œ
    print("[Main] ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œìž‘... (Async) ë¸Œë¼ìš°ì €ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.")
    await start_browser()
    yield
    # ì• í”Œë¦¬ì¼€ì´ì…˜ ì¢…ë£Œ ì‹œ
    print("[Main] ì• í”Œë¦¬ì¼€ì´ì…˜ ì¢…ë£Œ... ë¸Œë¼ìš°ì €ë¥¼ ë‹«ìŠµë‹ˆë‹¤.")
    await stop_browser()

app = FastAPI(lifespan=lifespan)

# ìƒìˆ˜ ì •ì˜
# Extractor í´ë”ê°€ í”„ë¡œì íŠ¸ ë£¨íŠ¸ë¼ê³  ê°€ì •
EXTRACTOR_ROOT = os.path.dirname(os.path.abspath(__file__))
RAW_DATA_DIR = os.path.join(EXTRACTOR_ROOT, "data", "raw")

def get_all_collected_data() -> List[Dict[str, Any]]:
    """
    ê¸°ëŠ¥: data/raw í´ë”ì˜ ëª¨ë“  JSON íŒŒì¼ ë‚´ìš©ì„ ì½ì–´ ë¦¬ìŠ¤íŠ¸ë¡œ ë°˜í™˜í•œë‹¤.
    input: ì—†ìŒ
    output: ëª¨ë“  ê¸°ì‚¬ ë°ì´í„°ê°€ ë‹´ê¸´ ë¦¬ìŠ¤íŠ¸ (List[Dict[str, Any]])
    """
    print("[main.py] ìˆ˜ì§‘ëœ ëª¨ë“  ë°ì´í„° ì½ê¸° ì‹œìž‘...")
    all_data = []
    if not os.path.exists(RAW_DATA_DIR):
        print(f"[main.py] ê²½ê³ : ë°ì´í„° ë””ë ‰í† ë¦¬({RAW_DATA_DIR})ê°€ ì¡´ìž¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.")
        return all_data

    # data/raw/{collection_time_str}/{category_name}/{filename}.json êµ¬ì¡°ë¥¼ ìˆœíšŒ
    for collection_folder in os.listdir(RAW_DATA_DIR):
        collection_path = os.path.join(RAW_DATA_DIR, collection_folder)
        if not os.path.isdir(collection_path): continue

        for category_name in os.listdir(collection_path):
            category_path = os.path.join(collection_path, category_name)
            if not os.path.isdir(category_path): continue

            for filename in os.listdir(category_path):
                if filename.endswith(".json"):
                    file_path = os.path.join(category_path, filename)
                    try:
                        with open(file_path, 'r', encoding='utf-8') as f:
                            data = json.load(f)
                            all_data.append(data)
                    except Exception as e:
                        print(f"[main.py] JSON íŒŒì¼ ì½ê¸°/íŒŒì‹± ì˜¤ë¥˜ {file_path}: {e}")
    print(f"[main.py] ì´ {len(all_data)}ê°œì˜ ë°ì´í„°ë¥¼ ì½ì—ˆìŠµë‹ˆë‹¤.")
    return all_data

@app.post("/collect", summary="ë‰´ìŠ¤ ìˆ˜ì§‘ ë° DB ì €ìž¥", description="ì„¤ì • íŒŒì¼ì— ëª…ì‹œëœ ëª¨ë“  ì–¸ë¡ ì‚¬ì˜ ë‰´ìŠ¤ë¥¼ ìˆ˜ì§‘í•˜ì—¬ DBì— ì €ìž¥í•˜ê³ , ìƒˆë¡œ ì €ìž¥ëœ ê¸°ì‚¬ì˜ ìˆ˜ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.")
async def run_collection_endpoint():
    logger = logging.getLogger(__name__) # logging ëª¨ë“ˆì—ì„œ ì§ì ‘ ë¡œê±° ê°€ì ¸ì˜¤ê¸°
    logger.info("'/collect' ì—”ë“œí¬ì¸íŠ¸ í˜¸ì¶œë¨. ì „ì²´ ë‰´ìŠ¤ ìˆ˜ì§‘ íŒŒì´í”„ë¼ì¸ ì‹œìž‘.")
    
    try:
        # DBì— ì €ìž¥í•˜ëŠ” íŒŒì´í”„ë¼ì¸ ì‹¤í–‰í•˜ê³  ìƒˆë¡œ ì¶”ê°€ëœ ê¸°ì‚¬ ìˆ˜ë¥¼ ë°›ìŒ
        added_count = await run_collection_pipeline()
        
        logger.info(f"ì´ {added_count}ê°œì˜ ìƒˆ ê¸°ì‚¬ ìˆ˜ì§‘ ë° DB ì €ìž¥ ì™„ë£Œ.")
        return JSONResponse(
            status_code=200,
            content={"message": f"ì´ {added_count}ê°œì˜ ìƒˆ ê¸°ì‚¬ê°€ DBì— ì €ìž¥ë˜ì—ˆìŠµë‹ˆë‹¤.", "new_articles_count": added_count}
        )
    except Exception as e:
        logger.error(f"'/collect' ì—”ë“œí¬ì¸íŠ¸ ì²˜ë¦¬ ì¤‘ ì‹¬ê°í•œ ì˜¤ë¥˜ ë°œìƒ: {e}", exc_info=True)
        raise HTTPException(
            status_code=500, 
            detail=f"ë‰´ìŠ¤ ìˆ˜ì§‘ íŒŒì´í”„ë¼ì¸ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: {e}"
        )

@app.get("/trends/korea")
async def get_korea_trends():
    """
    í•œêµ­ ì‹¤ì‹œê°„ íŠ¸ë Œë“œ í‚¤ì›Œë“œ ì¡°íšŒ (Playwright ë¹„ë™ê¸° ë°©ì‹ - ë¸Œë¼ìš°ì € ìž¬ì‚¬ìš©)
    input : ì—†ìŒ
    output : í•œêµ­ ì‹¤ì‹œê°„ íŠ¸ë Œë“œ í‚¤ì›Œë“œ (JSONí˜•ì‹)
    """
    print("\n[main.py] /trends/korea ì—”ë“œí¬ì¸íŠ¸ ìš”ì²­ ìˆ˜ì‹ ")
    
    browser = get_browser()
    if not browser:
        print("[main.py] ì—ëŸ¬: ë¸Œë¼ìš°ì € ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")
        raise HTTPException(status_code=500, detail="ì„œë²„ì— ë¸Œë¼ìš°ì €ê°€ ì¤€ë¹„ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ì„œë²„ ë¡œê·¸ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.")

    try:
        trends_data = await get_trending_keywords(browser)
        if trends_data:
            print("[main.py] Playwright ìŠ¤í¬ë ˆì´í•‘ ì„±ê³µ. JSON ì‘ë‹µì„ ë°˜í™˜í•©ë‹ˆë‹¤.")
            return JSONResponse(content={"keywords": trends_data})
        else:
            print("[main.py] Playwright ìŠ¤í¬ë ˆì´í¼ê°€ ë°ì´í„°ë¥¼ ë°˜í™˜í•˜ì§€ ëª»í–ˆê±°ë‚˜ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")
            raise HTTPException(status_code=500, detail="ìŠ¤í¬ëž˜í•‘ì„ í†µí•´ êµ¬ê¸€ íŠ¸ë Œë“œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")
            
    except Exception as e:
        print(f"[main.py] /trends/korea ì—”ë“œí¬ì¸íŠ¸ ì²˜ë¦¬ ì¤‘ ì˜ˆì™¸ ë°œìƒ: {e}")
        import traceback
        traceback.print_exc()
        raise HTTPException(status_code=500, detail=f"íŠ¸ë Œë“œ ë°ì´í„° ì¡°íšŒ ì¤‘ ì„œë²„ ì˜¤ë¥˜ ë°œìƒ: {str(e)}")

if __name__ == "__main__":
    # ì´ íŒŒì¼ì„ ì§ì ‘ ì‹¤í–‰í•˜ë©´ Uvicorn ì„œë²„ê°€ ì‹œìž‘ë©ë‹ˆë‹¤.
    # Windowsì—ì„œ asyncio ì •ì±… ì„¤ì • í›„ ì„œë²„ë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•´ ì´ ë°©ì‹ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
    import uvicorn
    uvicorn.run(app, host="127.0.0.1", port=8001)# ë‰´ìŠ¤ ê¸°ì‚¬ ë¶„ì„ ë° ìš”ì•½ í”„ë¡œì íŠ¸

ë³¸ í”„ë¡œì íŠ¸ëŠ” ì—¬ëŸ¬ êµ­ë‚´ì™¸ ë‰´ìŠ¤ ì‚¬ì´íŠ¸ì—ì„œ ê¸°ì‚¬ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ê³ , ì´ë¥¼ ë¶„ì„í•˜ì—¬ ìµœì¢…ì ìœ¼ë¡œ íŽ¸í–¥ì„±ì´ ì œê±°ëœ ì‚¬ì‹¤ ê¸°ë°˜ì˜ AI ìš”ì•½ ë‰´ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•©ë‹ˆë‹¤.

## í˜„ìž¬ê¹Œì§€ êµ¬í˜„ëœ ê¸°ëŠ¥ ë° ìž‘ë™ íë¦„

í˜„ìž¬ í”„ë¡œì íŠ¸ëŠ” ë‰´ìŠ¤ ê¸°ì‚¬ ìˆ˜ì§‘, ì´ˆê¸° ê·¸ë£¹í™”, ì´ˆê¸° ìš”ì•½ ë‹¨ê³„ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ê°œë°œë˜ì—ˆìŠµë‹ˆë‹¤. ê° ì£¼ìš” ì²˜ë¦¬ ëª¨ë“ˆ(`src/processing/`) ë‚´ì˜ í•µì‹¬ NLP ë¡œì§(ê¸°ì‚¬ ê·¸ë£¹í•‘, ìš”ì•½, íŽ¸í–¥ì„± ì œê±°)ì€ ì•„ì§ ì‹¤ì œ ëª¨ë¸ ì—°ë™ ì—†ì´ ìž„ì‹œ í”Œë ˆì´ìŠ¤í™€ë” í˜•íƒœë¡œ êµ¬í˜„ë˜ì–´ ìžˆìœ¼ë©°, ì£¼ë¡œ ë°ì´í„°ì˜ íë¦„ê³¼ íŒŒì¼ ì €ìž¥ êµ¬ì¡°ë¥¼ ê²€ì¦í•˜ëŠ” ë° ì´ˆì ì„ ë§žì¶”ê³  ìžˆìŠµë‹ˆë‹¤.

### 1. ë‰´ìŠ¤ ê¸°ì‚¬ ìˆ˜ì§‘ (`scripts/run_collection.py`)

-   **ëª©ì **: ì„¤ì • íŒŒì¼ì— ëª…ì‹œëœ ë‰´ìŠ¤ ì‚¬ì´íŠ¸ë¡œë¶€í„° ê¸°ì‚¬ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ì—¬ ì›ë³¸(raw) í˜•íƒœë¡œ ì €ìž¥í•©ë‹ˆë‹¤.
-   **ì‹¤í–‰**: `python scripts/run_collection.py`
-   **ìž‘ë™ íë¦„**:
    1.  `configs/news_sites.yaml` ì„¤ì • íŒŒì¼ì„ ë¡œë“œí•˜ì—¬ ìˆ˜ì§‘ ëŒ€ìƒ ì‚¬ì´íŠ¸ ë° ì¹´í…Œê³ ë¦¬ ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
    2.  ê° ì‚¬ì´íŠ¸ ì„¤ì •ì— ë”°ë¼ `src.collection.AVAILABLE_COLLECTORS`ì— ì •ì˜ëœ ì ì ˆí•œ ì»¬ë ‰í„° ì¸ìŠ¤í„´ìŠ¤(ì˜ˆ: `CnnCollector`)ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
        -   `CnnCollector`ëŠ” `src.collection.base_collector.BaseCollector`ë¥¼ ìƒì†ë°›ì•„ êµ¬í˜„ë˜ì—ˆìŠµë‹ˆë‹¤.
    3.  ì„ íƒëœ ì»¬ë ‰í„°ì˜ `collect_by_category` ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ ê° ì¹´í…Œê³ ë¦¬ë³„ë¡œ ê¸°ì‚¬ ë§í¬ ëª©ë¡ì„ ê°€ì ¸ì˜¤ê³ , ì´ì–´ ê° ë§í¬ì˜ ìƒì„¸ ë‚´ìš©ì„ ë¹„ë™ê¸°ì ìœ¼ë¡œ ìˆ˜ì§‘í•©ë‹ˆë‹¤.
        -   ì´ ê³¼ì •ì—ì„œ `aiohttp`ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¹„ë™ê¸° HTTP ìš”ì²­ì„ ì²˜ë¦¬í•˜ê³ , `BeautifulSoup`ë¥¼ ì‚¬ìš©í•˜ì—¬ HTML ë‚´ìš©ì„ íŒŒì‹±í•©ë‹ˆë‹¤ (ì˜ˆ: `CnnCollector` ë‚´ë¶€ì˜ `fetch_article_links`, `fetch_article_content`, `extract_article_details_cnn` í•¨ìˆ˜).
    4.  ìˆ˜ì§‘ëœ ê° ê¸°ì‚¬ ë°ì´í„°ëŠ” `src.utils.file_helper.py`ì˜ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤ì„ ì‚¬ìš©í•˜ì—¬ JSON íŒŒì¼ë¡œ ì €ìž¥ë©ë‹ˆë‹¤.
        -   `slugify`: ê¸°ì‚¬ ì œëª©ì„ íŒŒì¼ëª…ìœ¼ë¡œ ì‚¬ìš©í•˜ê¸° ì í•©í•œ í˜•íƒœë¡œ ë³€í™˜í•©ë‹ˆë‹¤.
        -   `get_output_path`: `data/raw/{ì‚¬ì´íŠ¸ëª…}/{ì¹´í…Œê³ ë¦¬ëª…}/{ìˆ˜ì§‘ë‚ ì§œ}/` êµ¬ì¡°ì— ë§žì¶° ì €ìž¥ ê²½ë¡œë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
        -   `save_json_async`: ë°ì´í„°ë¥¼ ë¹„ë™ê¸°ì ìœ¼ë¡œ JSON íŒŒì¼ì— ì”ë‹ˆë‹¤.
    5.  **ê²°ê³¼ë¬¼**: `data/raw/{ì‚¬ì´íŠ¸ëª…}/{ì¹´í…Œê³ ë¦¬ëª…}/{ìˆ˜ì§‘ë‚ ì§œ}/{ìŠ¬ëŸ¬ê·¸ëœ_ê¸°ì‚¬ì œëª©}.json` í˜•íƒœë¡œ ì›ë³¸ ê¸°ì‚¬ ë°ì´í„°ê°€ ì €ìž¥ë©ë‹ˆë‹¤.

### 2. ìˆ˜ì§‘ëœ ê¸°ì‚¬ ê·¸ë£¹í•‘ (`scripts/run_grouping.py`)

-   **ëª©ì **: ìˆ˜ì§‘ëœ ì›ë³¸ ê¸°ì‚¬ë“¤ ì¤‘ ë‚´ìš©ì´ ìœ ì‚¬í•œ ê²ƒë“¤ì„ í•˜ë‚˜ì˜ ê·¸ë£¹ìœ¼ë¡œ ë¬¶ìŠµë‹ˆë‹¤.
-   **ì‹¤í–‰**: `python scripts/run_grouping.py` (ì‚¬ì „ì— `run_collection.py` ì‹¤í–‰ í•„ìš”)
-   **ìž‘ë™ íë¦„**:
    1.  `data/raw/` ë””ë ‰í† ë¦¬ í•˜ìœ„ì˜ ëª¨ë“  ì‚¬ì´íŠ¸/ì¹´í…Œê³ ë¦¬/ë‚ ì§œ í´ë”ë¥¼ ìˆœíšŒí•˜ë©° ì €ìž¥ëœ ëª¨ë“  ê¸°ì‚¬ JSON íŒŒì¼ë“¤ì„ ë¡œë“œí•©ë‹ˆë‹¤ (`src.utils.file_helper.load_json` ì‚¬ìš©).
    2.  ë¡œë“œëœ ì „ì²´ ê¸°ì‚¬ ë¦¬ìŠ¤íŠ¸ë¥¼ `src.processing.article_grouper.py`ì˜ `group_articles` í•¨ìˆ˜ì— ì „ë‹¬í•©ë‹ˆë‹¤.
        -   **ì£¼ì˜**: í˜„ìž¬ `group_articles` í•¨ìˆ˜ëŠ” ì‹¤ì œ ìœ ì‚¬ë„ ë¹„êµë‚˜ í´ëŸ¬ìŠ¤í„°ë§ ë¡œì§ ì—†ì´, ëª¨ë“  ê¸°ì‚¬ë¥¼ í•˜ë‚˜ì˜ ê·¸ë£¹ìœ¼ë¡œ ë¬¶ëŠ” ë“± ìž„ì‹œì ì¸ ë¡œì§ìœ¼ë¡œ êµ¬í˜„ë˜ì–´ ìžˆìŠµë‹ˆë‹¤.
    3.  ê·¸ë£¹í™”ëœ ê²°ê³¼ (ê¸°ì‚¬ ê·¸ë£¹ ë¦¬ìŠ¤íŠ¸)ëŠ” `src.utils.file_helper.py`ì˜ `save_json_async` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ JSON íŒŒì¼ë¡œ ì €ìž¥ë©ë‹ˆë‹¤.
    4.  **ê²°ê³¼ë¬¼**: `data/processed/grouped_articles/{ì‹¤í–‰ë‚ ì§œ}/{ê·¸ë£¹ID}.json` í˜•íƒœë¡œ ê·¸ë£¹í™”ëœ ê¸°ì‚¬ ì •ë³´ê°€ ì €ìž¥ë©ë‹ˆë‹¤.

### 3. ê·¸ë£¹ ê¸°ì‚¬ ìš”ì•½ ë° í‚¤ì›Œë“œ ì¶”ì¶œ (`scripts/run_summarization.py`)

-   **ëª©ì **: ê·¸ë£¹í™”ëœ ê¸°ì‚¬ ë¬¶ìŒì— ëŒ€í•´ AI ê¸°ë°˜ ìš”ì•½ë¬¸ì„ ìƒì„±í•˜ê³  í•µì‹¬ í‚¤ì›Œë“œë¥¼ ì¶”ì¶œí•©ë‹ˆë‹¤.
-   **ì‹¤í–‰**: `python scripts/run_summarization.py` (ì‚¬ì „ì— `run_grouping.py` ì‹¤í–‰ í•„ìš”)
-   **ìž‘ë™ íë¦„**:
    1.  `data/processed/grouped_articles/` ë””ë ‰í† ë¦¬ í•˜ìœ„ì˜ ë‚ ì§œ í´ë”ë“¤ì„ ìˆœíšŒí•˜ë©° ì €ìž¥ëœ ëª¨ë“  ê·¸ë£¹í™”ëœ ê¸°ì‚¬ JSON íŒŒì¼ë“¤ì„ ë¡œë“œí•©ë‹ˆë‹¤ (`load_json` ì‚¬ìš©).
    2.  ë¡œë“œëœ ê° ê·¸ë£¹ ë°ì´í„°ë¥¼ `src.processing.summarizer.py`ì˜ `summarize_and_extract_keywords` í•¨ìˆ˜ì— ì „ë‹¬í•©ë‹ˆë‹¤.
        -   **ì£¼ì˜**: í˜„ìž¬ `summarize_and_extract_keywords` í•¨ìˆ˜ëŠ” ì‹¤ì œ ìš”ì•½ ëª¨ë¸ì´ë‚˜ í‚¤ì›Œë“œ ì¶”ì¶œ ì•Œê³ ë¦¬ì¦˜ ì—†ì´, ì›ë³¸ í…ìŠ¤íŠ¸ì˜ ì¼ë¶€ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë“± ìž„ì‹œì ì¸ ë¡œì§ìœ¼ë¡œ êµ¬í˜„ë˜ì–´ ìžˆìŠµë‹ˆë‹¤.
    3.  ì²˜ë¦¬ëœ ê²°ê³¼ (ìš”ì•½ë¬¸ê³¼ í‚¤ì›Œë“œê°€ ì¶”ê°€ëœ ê·¸ë£¹ ì •ë³´)ëŠ” `save_json_async` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ JSON íŒŒì¼ë¡œ ì €ìž¥ë©ë‹ˆë‹¤.
    4.  **ê²°ê³¼ë¬¼**: `data/processed/summarized_articles/{ì‹¤í–‰ë‚ ì§œ}/{ê·¸ë£¹ID}_summary.json` í˜•íƒœë¡œ ìš”ì•½ ë° í‚¤ì›Œë“œ ì •ë³´ê°€ ì €ìž¥ë©ë‹ˆë‹¤.

### í–¥í›„ êµ¬í˜„ ì˜ˆì •

-   **íŽ¸í–¥ì„± ë¶„ì„ ë° ì œê±°**: `scripts/run_bias_neutralization.py` ë° `src/processing/bias_neutralizer.py` êµ¬í˜„.
-   **í†µí•© íŒŒì´í”„ë¼ì¸**: `src/main.py`ë¥¼ í†µí•´ ì „ì²´ ê³¼ì •ì„ í†µí•©ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê³  ì‹¤í–‰í•˜ëŠ” ê¸°ëŠ¥.
-   **í•µì‹¬ NLP ë¡œì§ êµ¬ì²´í™”**: `src/processing/` ë‚´ì˜ `group_articles`, `summarize_and_extract_keywords`, `neutralize_bias` í•¨ìˆ˜ì— ì‹¤ì œ ìžì—°ì–´ ì²˜ë¦¬ ëª¨ë¸ ë° ì•Œê³ ë¦¬ì¦˜ì„ ì ìš©.
-   **í…ŒìŠ¤íŠ¸ ì½”ë“œ**: `tests/` ë””ë ‰í† ë¦¬ì— ê° ëª¨ë“ˆ ë° ì „ì²´ íë¦„ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œ ìž‘ì„±.

## í´ë” êµ¬ì¡° ì£¼ìš” ì•ˆë‚´

-   `configs/`: í”„ë¡œì íŠ¸ ì„¤ì • íŒŒì¼ (ì˜ˆ: `news_sites.yaml`)
-   `data/`: ëª¨ë“  ë°ì´í„° ì €ìž¥
    -   `raw/`: ìˆ˜ì§‘ëœ ì›ë³¸ ê¸°ì‚¬ (ì‚¬ì´íŠ¸ë³„/ì¹´í…Œê³ ë¦¬ë³„/ë‚ ì§œë³„)
    -   `processed/`: ê°€ê³µëœ ë°ì´í„° (ê·¸ë£¹í™”, ìš”ì•½, íŽ¸í–¥ì„± ì œê±° ê²°ê³¼)
-   `scripts/`: ê° ë‹¨ê³„ë³„ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸
-   `src/`: í•µì‹¬ ì†ŒìŠ¤ ì½”ë“œ
    -   `collection/`: ë‰´ìŠ¤ ê¸°ì‚¬ ìˆ˜ì§‘ ê´€ë ¨ ëª¨ë“ˆ
    -   `processing/`: ê¸°ì‚¬ ê·¸ë£¹í•‘, ìš”ì•½, íŽ¸í–¥ì„± ì œê±° ë“± ì²˜ë¦¬ ëª¨ë“ˆ
    -   `utils/`: ê³µí†µ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ (íŒŒì¼ ìž…ì¶œë ¥, í…ìŠ¤íŠ¸ ì²˜ë¦¬ ë“±)
-   `requirements.txt`: í”„ë¡œì íŠ¸ ì˜ì¡´ì„± íŒ¨í‚¤ì§€ ëª©ë¡
fastapi
uvicorn
python-multipart
asyncio

requests
beautifulsoup4
lxml
playwright
Crawl4AI==0.6.3

spacy
torch>=2.6
transformers==4.41.2
sentencepiece==0.2.0
nltk
openai
google-cloud-storage
SQLAlchemy
PyMySQL

protobuf
pyyaml
aiohttp
cchardet
aiodns
langdetect
pytrends
python-slugify

https://github.com/explosion/spacy-models/releases/download/ko_core_news_sm-3.8.0/ko_core_news_sm-3.8.0-py3-none-any.whl#sha256=15486b93a22ec8ee43f787390afdb4e2086851573eb12b69dd2c4f2a95b3e0a4
https://github.com/explosion/spacy-models/releases/download/en_core_web_sm-3.8.0/en_core_web_sm-3.8.0-py3-none-any.whl#sha256=1932429db727d4bff3deed6b34cfc05df17794f4a52eeb26cf8928f7c1a0fb85 